; ============================================================
; HALMET Marine Engine & Tank Monitor
; PlatformIO project configuration
; ============================================================

[env:halmet]
platform  = espressif32
board     = esp32dev
framework = arduino

monitor_speed  = 115200
upload_speed   = 921600

; Partition scheme with 2 MB app + 2 MB OTA
board_build.partitions = min_spiffs.csv

build_flags =
    -D ARDUINO_USB_CDC_ON_BOOT=0
    ; --- HALMET physical pin assignments ---
    -D HALMET_PIN_D1=23       ; Alternator W-terminal (RPM pulse input)
    -D HALMET_PIN_D2=25       ; Oil pressure warning  (active-low)
    -D HALMET_PIN_D3=27       ; Temperature warning   (active-low)
    -D HALMET_PIN_D4=26       ; Ignition key sense    (optional, +12V)
    -D HALMET_PIN_1WIRE=4     ; DS18B20 1-Wire bus
    -D HALMET_PIN_RELAY=32    ; Bilge fan relay output (GPIO header)
    ; --- ADS1115 I2C address (ADDR pin to GND â†’ 0x48) ---
    -D ADS1115_ADDRESS=0x48
    ; --- NMEA 2000 CAN pins (HALMET fixed) ---
    -D ESP32_CAN_TX_PIN=GPIO_NUM_5
    -D ESP32_CAN_RX_PIN=GPIO_NUM_4   ; Note: overridden internally by NMEA2000_esp32

lib_deps =
    SignalK/SensESP @ ^3.0
    ttlappalainen/NMEA2000 @ ^4.19
    ttlappalainen/NMEA2000_esp32 @ ^1.0
    paulstoffregen/OneWire @ ^2.3
    milesburton/DallasTemperature @ ^3.9
    adafruit/Adafruit ADS1X15 @ ^2.5
